<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>PRIDE エントリー</title>
  <style>
    body { font-family: sans-serif; padding: 20px; text-align: center; }
    .btn { padding: 10px 20px; margin: 5px; font-size: 18px; }
    .active { background: #007bff; color: white; }
    .panel { display: none; margin-top: 20px; }
    input { width: 90%; padding: 10px; margin: 5px; font-size: 16px; }
    .submit { padding: 10px 20px; margin-top: 10px; font-size: 18px; }
    .notice { margin-top: 20px; font-size: 14px; color: #555; }
  </style>
</head>
<body>

<h2>PRIDE エントリー</h2>

<!-- 3ボタン -->
<button id="btnSR" class="btn active">SR</button>
<button id="btnMK" class="btn">マークスマン</button>
<button id="btnLD" class="btn">レディース</button>

<!-- SR -->
<div id="panelSR" class="panel" style="display:block;">
  <input id="sr1" placeholder="ゲーム名">
  <input id="sr2" placeholder="パラレル名">
  <button class="submit" onclick="addEntry('entries_SR','sr1','sr2')">追加</button>
</div>

<!-- Marksman -->
<div id="panelMK" class="panel">
  <input id="mk1" placeholder="ゲーム名">
  <input id="mk2" placeholder="パラレル名">
  <button class="submit" onclick="addEntry('entries_Marksman','mk1','mk2')">追加</button>
</div>

<!-- Ladies -->
<div id="panelLD" class="panel">
  <input id="ld1" placeholder="ゲーム名">
  <input id="ld2" placeholder="パラレル名">
  <button class="submit" onclick="addEntry('entries_Ladies','ld1','ld2')">追加</button>
</div>

<div class="notice">
  ※ 入力内容は正確にお願いします。<br>
  ※ 抽選後の名前変更はできません。<br>
  ※ 不明点はチームリーダーへ。<br>
  TikTok: <a href="https://www.tiktok.com/@captain122483" target="_blank">captain122483</a>
</div>

<!-- Firebase -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getFirestore, collection, addDoc } 
    from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
  import { getAuth, signInAnonymously } 
    from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

  // ★ あなたの Firebase 設定を入れてね
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_PROJECT.firebaseapp.com",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_PROJECT.appspot.com",
    messagingSenderId: "YOUR_SENDER_ID",
    appId: "YOUR_APP_ID"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // ★ 匿名ログイン（裏で自動ログイン）
  const auth = getAuth();
  signInAnonymously(auth);

  // ★ パネル切り替え
  function showPanel(target) {
    document.querySelectorAll(".panel").forEach(p => p.style.display = "none");
    document.getElementById("panel" + target).style.display = "block";

    document.querySelectorAll(".btn").forEach(b => b.classList.remove("active"));
    document.getElementById("btn" + target).classList.add("active");

    clearInputs();
  }

  // ★ 入力欄クリア
  function clearInputs() {
    document.querySelectorAll("input").forEach(i => i.value = "");
  }

  // ボタンイベント
  btnSR.onclick = () => showPanel("SR");
  btnMK.onclick = () => showPanel("MK");
  btnLD.onclick = () => showPanel("LD");

  // ★ Firestore 追加
  async function addEntry(col, id1, id2) {
    const name1 = document.getElementById(id1).value.trim();
    const name2 = document.getElementById(id2).value.trim();

    if (!name1 || !name2) {
      alert("名前を入力してください");
      return;
    }

    await addDoc(collection(db, col), {
      name1,
      name2,
      time: new Date()
    });

    alert("追加しました");
    clearInputs();
  }
</script>

</body>
</html>
